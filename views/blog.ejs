<!DOCTYPE html>
<html lang="en">
<head>
    <%- include('../partials/head.ejs') %>
    <title>BLOG PAGE</title>
</head>
<body>
    <%- include('../partials/nav.ejs') %>
    <% if (locals.blog) { %>
    <div class="container ms-5 ">
    <div class="d-flex flex-row justify-content-center"><h2 class="mt-4 "><%= blog.title %></h2></div>
    <span class="d-flex flex-row justify-content-center mt-4"><img src="<%= blog.coverImageUrl %>" class="mt-3" width="400px" alt="" ></span>
    </div>
    <div class="mt-4 ms-5">
    <p class="mt-4"><%= blog.body %></p>
    </div>

    <div class="mt-4 ms-5">
        <span class="" ><img src="/public/<%= blog.createdBy.profilepic %>" width="50px" alt="profile"></span>
        <span class="mx-2">Created by: <%= blog.createdBy.fullName %></span>
    </div>

<% if (locals.user) { %>
    <h3 class="ms-4 mt-4">Comments:(<%= comments.length %>)</h3>
    <form class="needs validation" action="/blog/comment/<%= blog._id %>" method="post">
    <div class="mt-4 ms-4">
        <label for="title" class="form-label">Comment</label>
        <input type="text" class="form-control" id="content" name="content" placeholder="Enter your comment" required >
    </div>
    <div class="col-4 ms-4 mt-2">
        <button class="btn btn-primary mt-3" type="submit">Submit comment</button>
    </div>
    </form>
    <% } %>
    
    <% if (locals.comments) { %>
     <h4 class="ms-4 mt-4">Posted comments</h4>
     <div class="mt-4 ms-4">
        <% comments.forEach(comment => { %>
         <div class="ms-4 mt-2">
            <span class="" ><img src="/public/<%=comment.createdBy.profilepic%>" width="50px" alt="profile"></span>
            <span class="mx-2"><%= comment.createdBy.fullName %></span>
         </div>
         <div><pre><%= comment.content %></pre></div>
        <% }) %>
     </div>
    <% } %>

    <% } %>

    <%- include('../partials/scripts.ejs') %>
</body>
</html>

